<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <title>Dashboard</title>
  <link rel="icon" type="image/x-icon" href="https://du11hjcvx0uqb.cloudfront.net/dist/images/favicon-e10d657a73.ico" />

    <style>
        /* Remove default margins and paddings */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        /* Make iframe fill the entire viewport */
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
    </style>
</head>
<body>
    <iframe src="https://macvg2025.github.io/macvg"></iframe>
    <script>
(function(){
  // ---------------------------
  // Config / thresholds / data
  // ---------------------------
  const STORAGE_KEYS = {
    USER: 'macvg_user_v2',
    HISTORY: 'macvg_history_v2',
    LEADERBOARD: 'macvg_leaderboard_v2',
    REWARDS: 'macvg_rewards_claimed_v2'
  };

  const REDEEM_EMAIL = 'niamnangalia1234@gmail.com';
  const REDEEM_PHONE = '123-456-7890';

  const MILESTONE_DEFINITIONS = [
    {points: 10, label: 'Welcome Badge'},
    {points: 50, label: 'Starter Badge'},
    {points: 100, label: 'Novice Gamer'},
    {points: 500, label: 'Pro Gamer'},
    {points: 1000, label: 'Elite Gamer'},
    {points: 5000, label: 'MacVG Master'},
    {points: 10000, label: 'School Star'},
    {points: 25000, label: 'Coding Champ'},
    {points: 50000, label: 'Exclusive Access'},
    {points: 100000, label: 'VIP'},
    {points: 250000, label: 'Tech Genius'},
    {points: 500000, label: 'Legendary Player'},
    {points: 1000000, label: 'Ultimate Gamer'},
    {points: 2000000, label: 'The Chosen One'},
    {points: 5000000, label: 'School Hero'},
    {points: 10000000, label: 'MacVG Immortal'},
    {points: 100000000, label: 'Golden Legend â€” iPhone 16'}
  ];

  const CLASS_SCHEDULE = [
    { period: 'Homeroom', teacher: 'Mrs. Sundt' },
    { period: '1st Period: P.E.', teacher: 'Mr. Santos' },
    { period: '2nd Period: Algebra', teacher: 'Mr. Featherston' },
    { period: '3rd Period: Design and Modeling', teacher: 'Mr. Christensen' },
    { period: 'A Lunch', teacher: '' },
    { period: '4th Period: Earth and Space Science', teacher: 'Mrs. Angster' },
    { period: '5th Period: Advanced Language Arts', teacher: 'Mrs. Sundt' },
    { period: '6th Period: Social Studies', teacher: 'Mrs. Tiemeyer' }
  ];

  const THROTTLE_MS = 100;

  // ---------------------------
  // Storage helpers
  // ---------------------------
  function lsGet(key, fallback){
    try { const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : fallback; } catch(e){ return fallback; }
  }
  function lsSet(key, val){
    try { localStorage.setItem(key, JSON.stringify(val)); } catch(e){}
  }

  // ---------------------------
  // Load data
  // ---------------------------
  let user = lsGet(STORAGE_KEYS.USER, null);
  let history = lsGet(STORAGE_KEYS.HISTORY, []);
  let leaderboard = lsGet(STORAGE_KEYS.LEADERBOARD, []);
  let rewardsClaimed = lsGet(STORAGE_KEYS.REWARDS, []);

  // ---------------------------
  // Inject CSS
  // ---------------------------
  const css = `
  :root { --bg:#080808; --accent:#ff8c42; --muted: rgba(220,220,220,0.65); }
  .mvg-center-overlay { position: fixed; inset:0; display:grid; place-items:center; z-index:99999; background:rgba(0,0,0,0.85); backdrop-filter:blur(6px); }
  .mvg-modal { width:720px; max-width:90%; background:#080808; border-radius:14px; padding:24px; color:#fff; border:1px solid rgba(255,140,66,0.15); display:grid; grid-template-columns:1fr 260px; gap:18px; font-family: 'Inter', system-ui, -apple-system, "Segoe UI", Roboto, Arial; }
  .mvg-left { padding-right:6px; }
  .mvg-h { font-size:1.3rem; margin:0 0 8px; color:#fff; letter-spacing:0.2px; }
  .mvg-desc { margin:0 0 12px; color: var(--muted); font-size:0.98rem; line-height:1.35; }
  .mvg-input { display:flex; gap:8px; margin-top:10px; }
  .mvg-input input[type="text"]{ flex:1; padding:12px 14px; border-radius:10px; border:1px solid rgba(255,255,255,0.04); background: rgba(255,255,255,0.02); color: #fff; font-size:0.98rem; outline:none; box-shadow: inset 0 -8px 18px rgba(0,0,0,0.6); }
  .mvg-btn { background: linear-gradient(180deg, rgba(255,140,66,0.18), rgba(255,140,66,0.08)); border:none; padding:10px 14px; border-radius:10px; color:#fff; font-weight:800; cursor:pointer; transition: transform 160ms ease, box-shadow 160ms ease; box-shadow:0 10px 30px rgba(255,140,66,0.06); }
  .mvg-btn:hover { transform: translateY(-3px); box-shadow:0 18px 44px rgba(255,140,66,0.12); }
  .mvg-right { background:#080808; padding:12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); color: var(--muted); }
  .mvg-small { font-size:0.9rem; color: var(--muted); margin-bottom:6px; }
  .mvg-smallmuted { color: rgba(220,220,220,0.6); font-size:0.86rem; }
  .mvg-top-left { position: fixed; top:16px; left:16px; z-index:100000; display:flex; gap:8px; align-items:center; }
  .mvg-top-right { position: fixed; top:16px; right:16px; z-index:100000; display:flex; gap:10px; align-items:center; }
  .mvg-tab { padding:8px 14px; background:#111; border-radius:10px; border:1px solid var(--accent); color:#fff; font-weight:700; cursor:pointer; box-shadow:0 6px 20px rgba(0,0,0,0.45); transition: all 0.16s ease; }
  .mvg-tab:hover { box-shadow:0 8px 28px rgba(255,140,66,0.45); border-color: #ff8c42; }
  .mvg-panel { position: fixed; top:56px; left:16px; width:420px; max-width: calc(100% - 32px); z-index:99999; background:#080808; border-radius:10px; padding:12px; border:1px solid rgba(255,140,66,0.12); box-shadow:0 12px 40px rgba(0,0,0,0.6); display:none; color:#fff; font-size:0.95rem; max-height:70vh; overflow:auto; }
  .mvg-panel.show { display:block; animation: mvg-slide 200ms cubic-bezier(.2,.9,.2,1); }
  @keyframes mvg-slide { from { transform: translateY(-8px); opacity:0 } to { transform: translateY(0); opacity:1 } }
  .mvg-history-item { padding:6px 0; border-bottom:1px dashed rgba(255,255,255,0.03); }
  .mvg-points { display:flex; gap:8px; align-items:center; background:#111; padding:8px 12px; border-radius:12px; border:1px solid var(--accent); font-weight:800; color:#fff; box-shadow:0 8px 30px rgba(0,0,0,0.5); }
  .mvg-star { width:20px; height:20px; display:inline-block; background: url('data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjZmY4YzQyIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExLjk5IDcuMDFsMS44OCAzLjgyIDQuMjMgLjYyLTMuMDUgMi45OCAuNzMgNC4yNi0zLjc3LTIuMDEtMy43NyAyLjAyLjc0LTQuMjYtMy4wNS0yLjk4IDQuMjMtLjYyIDEuODgtMy44MiIvPjwvc3ZnPg==') no-repeat center center / contain; }
  `;
  const styleTag = document.createElement('style'); styleTag.textContent = css; document.head.appendChild(styleTag);

  // ---------------------------
  // Modal Notifications
  // ---------------------------
  function showModalNotification(htmlContent){
    return new Promise(resolve=>{
      const overlay = document.createElement('div'); overlay.className='mvg-center-overlay';
      const modal = document.createElement('div'); modal.className='mvg-modal';
      modal.innerHTML = `<div class="mvg-left"><div>${htmlContent}</div><button class="mvg-btn" style="margin-top:16px;">Continue</button></div>`;
      overlay.appendChild(modal);
      document.body.appendChild(overlay);
      modal.querySelector('button').addEventListener('click', ()=>{
        overlay.remove();
        resolve();
      });
    });
  }

  // ---------------------------
  // Tabs
  // ---------------------------
  const topLeft = document.createElement('div'); topLeft.className='mvg-top-left'; document.body.appendChild(topLeft);
  const topRight = document.createElement('div'); topRight.className='mvg-top-right'; document.body.appendChild(topRight);

  const pointsDisplay = document.createElement('div'); pointsDisplay.className='mvg-points'; pointsDisplay.innerHTML='<span class="mvg-star"></span>0'; topRight.appendChild(pointsDisplay);
  function updatePoints(){ pointsDisplay.innerHTML='<span class="mvg-star"></span>'+points; }

  function createTab(label, contentFunc){
    const tab = document.createElement('div'); tab.className='mvg-tab'; tab.textContent=label;
    const panel = document.createElement('div'); panel.className='mvg-panel';
    tab.addEventListener('click', ()=>{ 
      const showing = panel.classList.contains('show');
      document.querySelectorAll('.mvg-panel').forEach(p=>p.classList.remove('show'));
      if(!showing) { panel.classList.add('show'); panel.innerHTML = contentFunc(); }
    });
    topLeft.appendChild(tab);
    document.body.appendChild(panel);
  }

  // ---------------------------
  // History + Leaderboard
  // ---------------------------
  createTab('History', ()=>history.map(h=>`<div class="mvg-history-item">[${h.time}] ${h.type}: ${h.detail}</div>`).join('')||'No activity yet.');
  createTab('Leaderboard', ()=>{
    const sorted = [...leaderboard].sort((a,b)=>b.points-a.points);
    return sorted.map(l=>`<div class="mvg-history-item"><b>${l.user}</b> - ${l.points} pts</div>`).join('')||'No leaderboard data yet.';
  });

  // ---------------------------
  // Clicks & Key presses
  // ---------------------------
  let points = 0; let lastTime=0;
  function recordAction(type, detail){
    const now = Date.now();
    if(now-lastTime<THROTTLE_MS) return;
    lastTime = now;
    points++;
    updatePoints();
    history.push({time: new Date().toLocaleTimeString(), type, detail});
    lsSet(STORAGE_KEYS.HISTORY, history);

    // Milestones
    (async function(){
      for(const m of MILESTONE_DEFINITIONS){
        if(points>=m.points && !rewardsClaimed.includes(m.points)){
          rewardsClaimed.push(m.points);
          lsSet(STORAGE_KEYS.REWARDS,rewardsClaimed);
          await showModalNotification(`ðŸŽ‰ Congrats! You reached ${m.points} points (${m.label}). Redeem from ${REDEEM_EMAIL} or call/text: ${REDEEM_PHONE}`);
        }
      }
    })();

    // Leaderboard
    const idx = leaderboard.findIndex(e=>e.user===user);
    if(idx===-1) leaderboard.push({user, points}); else leaderboard[idx].points=points;
    lsSet(STORAGE_KEYS.LEADERBOARD, leaderboard);
  }

  document.addEventListener('click',()=>recordAction('Click','On page'));
  document.addEventListener('keydown',e=>recordAction('Key', e.key));

  // ---------------------------
  // Username modal
  // ---------------------------
  function showUsernameModal(cb){
    if(user) { cb(user); return; }
    const overlay = document.createElement('div'); overlay.className='mvg-center-overlay';
    overlay.innerHTML = `<div class="mvg-modal">
      <div class="mvg-left">
        <h2 class="mvg-h">Welcome to MacVG!</h2>
        <p class="mvg-desc">Type a username to start earning points.</p>
        <div class="mvg-input">
          <input type="text" placeholder="Enter username..." />
          <button class="mvg-btn">Start</button>
        </div>
      </div>
      <div class="mvg-right">
        <p class="mvg-small">School Schedule</p>
        ${CLASS_SCHEDULE.map(c=>`<p class="mvg-smallmuted">${c.period}: ${c.teacher}</p>`).join('')}
      </div>
    </div>`;
    document.body.appendChild(overlay);
    const input = overlay.querySelector('input');
    const btn = overlay.querySelector('button');
    function submit(){ 
      const val=input.value.trim(); if(!val) return input.focus();
      user=val; lsSet(STORAGE_KEYS.USER,user);
      overlay.remove(); cb(user);
    }
    btn.addEventListener('click',submit);
    input.addEventListener('keypress',e=>{if(e.key==='Enter') submit();});
  }

  showUsernameModal(u=>showModalNotification(`Welcome, <b>${u}</b>! Start earning points!`));
})();

window.addEventListener('message', e=>{
  if(e.data.type==='iframeClick') recordAction('Click','Inside iframe');
  if(e.data.type==='iframeKey') recordAction('Key', e.data.key);
});

    </script>
</body>
</html>
